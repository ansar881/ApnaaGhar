import{a as Pi}from"./chunk-EJC6NVRF.js";import{a as Ei}from"./chunk-OQAEY6RT.js";import{$ as Xe,Aa as Ci,B as Ce,Ba as bi,C as be,Ca as xi,D as xe,Da as yi,E as ye,Ea as wi,F as we,Fa as Si,G as Se,Ga as Ii,H as Ie,I as Ee,J as Te,K as Le,L as Ae,M as Ve,N as ke,O as Ue,P as je,Q as De,R as Re,S as Be,V as Ne,W as ze,X as qe,Z as Ke,_ as We,a as k,aa as Je,ba as Qe,c as U,ca as Ye,da as ei,e as Z,ea as ii,f as Q,fa as ti,h as Y,ha as oi,i as ee,ia as ri,j as oe,ja as ni,k as re,ka as li,l as ne,ma as mi,n as le,oa as si,p as ae,q as me,qa as pi,r as se,ra as ui,s as ue,t as de,ta as di,u as ce,ua as ci,v as fe,va as gi,w as ge,wa as _i,x as _e,xa as vi,y as ve,ya as Mi,z as Me,za as hi}from"./chunk-P6F435ZV.js";import{$c as $,$d as fi,Ad as he,Bc as B,Cc as N,Cd as Pe,Dc as G,Ec as z,Fa as v,Gc as q,Ia as p,Ja as F,Jd as Fe,Ld as Oe,Nd as Ge,O as P,Oa as l,Pa as r,Pd as He,Qa as f,Qb as A,T as E,Td as $e,Ua as w,Ub as V,Va as g,Wa as u,X as T,Xb as C,Xc as H,Xd as Ze,Zd as ai,_b as O,cb as m,cd as K,da as d,ea as c,ed as W,id as X,kb as L,o as y,pd as J,ta as s,tc as j,td as ie,ua as h,vc as b,wd as te,xc as D,y as _,yc as R,zd as pe}from"./chunk-265SXWIP.js";var x=class o{constructor(i){this.http=i}mainUrl="https://fakerestapi.azurewebsites.net";apiVersion="/api/v1/";userLogin(i){let e=new C;return e.set("Content-Type","application/json"),this.http.post(this.mainUrl+"/login",i,{headers:e}).pipe(_(t=>this.handleError(t)))}getAll(i){return this.http.get(this.mainUrl+this.apiVersion+i).pipe(_(e=>this.handleError(e)))}getById(i,e){return this.http.get(this.mainUrl+this.apiVersion+i+`/${e}`).pipe(_(t=>this.handleError(t)))}post(i,e){let t=new C;return t.set("Content-Type","application/json"),this.http.post(this.mainUrl+this.apiVersion+i,e,{headers:t}).pipe(_(n=>this.handleError(n)))}put(i,e,t){let n=new C;return n.set("Content-Type","application/json"),this.http.put(this.mainUrl+this.apiVersion+i+`/${e}`,t,{headers:n}).pipe(_(a=>this.handleError(a)))}delete(i,e){return this.http.delete(this.mainUrl+this.apiVersion+i+`/${e}`).pipe(_(t=>this.handleError(t)))}handleError(i){let e="An unknown error occurred!";return!i.error||!i.error.messages?y(()=>e):(e=i.error.messages[0],y(()=>e))}static \u0275fac=function(e){return new(e||o)(E(O))};static \u0275prov=P({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ai(o,i){o&1&&(l(0,"span"),m(1,"Welcome Back"),r())}function Vi(o,i){o&1&&(l(0,"span"),m(1,"Sign Up"),r())}function Oi(o,i){o&1&&(l(0,"div")(1,"small",23),m(2,"Please select category."),r()())}function ki(o,i){o&1&&(l(0,"div")(1,"small",23),m(2,"Username is required."),r()())}function Ui(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password is required. "),r())}function ji(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password must be at least 8 characters long. "),r())}function Di(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password must contain at least one uppercase letter. "),r())}function Ri(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password must contain at least one lowercase letter. "),r())}function Bi(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password must contain at least one number. "),r())}function Ni(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Password must contain at least one special character. "),r())}function Gi(o,i){if(o&1&&(l(0,"div"),v(1,Ui,3,0,"small",20)(2,ji,3,0,"small",20)(3,Di,3,0,"small",20)(4,Ri,3,0,"small",20)(5,Bi,3,0,"small",20)(6,Ni,3,0,"small",20),r()),o&2){let e,t,n,a,S,I,M=u(2);s(),p("ngIf",(e=M.loginForm.get("password"))==null?null:e.hasError("required")),s(),p("ngIf",(t=M.loginForm.get("password"))==null?null:t.hasError("minLength")),s(),p("ngIf",(n=M.loginForm.get("password"))==null?null:n.hasError("noUpperCase")),s(),p("ngIf",(a=M.loginForm.get("password"))==null?null:a.hasError("noLowerCase")),s(),p("ngIf",(S=M.loginForm.get("password"))==null?null:S.hasError("noNumber")),s(),p("ngIf",(I=M.loginForm.get("password"))==null?null:I.hasError("noSpecialChar"))}}function zi(o,i){o&1&&(l(0,"small",23),f(1,"span",24),m(2," Invalid inputs please try again. "),r())}function qi(o,i){if(o&1){let e=w();l(0,"div",7)(1,"div",8),m(2,"Login"),r(),l(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12),m(7,"Are you ?"),r(),l(8,"div",13)(9,"input",14),g("input",function(n){d(e);let a=u();return c(a.onInput(n))}),r(),l(10,"div",15),m(11,"Admin"),r()(),l(12,"div",13)(13,"input",16),g("input",function(n){d(e);let a=u();return c(a.onInput(n))}),r(),l(14,"div",17),m(15,"User"),r()()(),v(16,Oi,3,0,"div",4),r(),l(17,"div",10)(18,"input",18),g("input",function(n){d(e);let a=u();return c(a.onInput(n))}),r(),v(19,ki,3,0,"div",4),r(),l(20,"div",10)(21,"input",19),g("input",function(n){d(e);let a=u();return c(a.onInput(n))}),r(),v(22,Gi,7,6,"div",4)(23,zi,3,0,"small",20),r(),l(24,"button",21),g("click",function(){d(e);let n=u();return c(n.onLogin())}),m(25,"Login"),r()(),l(26,"div",22),g("click",function(){d(e);let n=u();return c(n.createAccount())}),m(27,"New to ApnaaGhar?Sign Up"),r()()}if(o&2){let e,t,n,a=u();s(3),p("formGroup",a.loginForm),s(13),p("ngIf",((e=a.loginForm.get("member"))==null?null:e.touched)&&((e=a.loginForm.get("member"))==null?null:e.invalid)),s(3),p("ngIf",((t=a.loginForm.get("username"))==null?null:t.touched)&&((t=a.loginForm.get("username"))==null?null:t.invalid)),s(3),p("ngIf",((n=a.loginForm.get("password"))==null?null:n.touched)&&((n=a.loginForm.get("password"))==null?null:n.invalid)),s(),p("ngIf",a.invalidUserPswd)}}function Hi(o,i){if(o&1){let e=w();l(0,"div",25)(1,"app-create-account",26),g("showLogin",function(n){d(e);let a=u();return c(a.showloginPage(n))}),r()()}}var Ti=class o{constructor(i,e,t,n,a){this.fb=i;this.router=e;this.actRoute=t;this.authService=n;this.serverService=a}loginForm;pswdDetailsDialog=!1;openWindowId;invalidUserPswd=!1;isloginPanel=!0;ngOnInit(){this.loginFormBuilder(),this.actRoute.queryParams.subscribe(i=>{i.action&&i.action==="login"?this.isloginPanel=!0:i.action&&i.action==="signup"&&(this.isloginPanel=!1)})}ngAfterViewInit(){}loginFormBuilder(){this.loginForm=this.fb.group({username:["Ansar",[b.required]],password:["Ansar@123",[b.required,this.passwordValidator]],member:["User",[b.required]]})}onLogin(){this.loginForm.valid?(this.invalidUserPswd=!1,this.authService.userLogin=!0,this.authService.user=this.loginForm.value,this.serverService.userLogin(this.loginForm.value).subscribe(i=>{let e=i.headers.get("X-CSRF-Token");e&&(this.authService.csrfToken=e)}),this.loginForm.value.member==="Admin"?(this.authService.adminLogin=!0,this.router.navigate(["/adminDashboard"])):this.router.navigate(["/home"])):this.invalidUserPswd=!0}onInput(i){this.invalidUserPswd=!1}showPswdValidation(){this.pswdDetailsDialog=!0}createAccount(){this.isloginPanel=!1}showloginPage(i){this.isloginPanel=!0}passwordValidator=i=>{let e=i.value;if(!e)return null;let t={};return e.length<8&&(t.minLength=!0),/[A-Z]/.test(e)||(t.noUpperCase=!0),/[a-z]/.test(e)||(t.noLowerCase=!0),/[0-9]/.test(e)||(t.noNumber=!0),/[@#$&]/.test(e)||(t.noSpecialChar=!0),Object.keys(t).length>0?t:null};static \u0275fac=function(e){return new(e||o)(h(z),h(U),h(k),h(Pi),h(x))};static \u0275cmp=T({type:o,selectors:[["app-login"]],standalone:!0,features:[L],decls:8,vars:6,consts:[[1,"login-comp","display-flex","justify-content-center","paddingBLRem1"],[1,"login-sec"],[1,"login-img-sec","display-flex","justify-content-center","align-items-center"],[1,"welcm-txt"],[4,"ngIf"],["class","login-container display-flex justify-content-center align-items-center flex-direction-column gapRem2",4,"ngIf"],["class","createAccount-container",4,"ngIf"],[1,"login-container","display-flex","justify-content-center","align-items-center","flex-direction-column","gapRem2"],[1,"login-title"],[1,"login-form-group","display-flex","flex-direction-column",3,"formGroup"],[1,"form-group"],[1,"member-container","display-flex","align-items-center","gapRem0-5"],[1,"category-title"],[1,"member-div","display-flex","align-items-center"],["id","AdminMember","type","radio","value","Admin","formControlName","member",1,"login-member-input",3,"input"],[1,"AdminMember"],["id","userMember","type","radio","value","User","formControlName","member",1,"login-member-input",3,"input"],[1,"userMember"],["id","username","type","text","formControlName","username","placeholder","Username, phone number or email",1,"login-input","width100pc",3,"input"],["id","password","type","password","formControlName","password","placeholder","Password",1,"login-input","width100pc",3,"input"],["class","error-text",4,"ngIf"],["type","submit",1,"login-btn","width100pc",3,"click"],[1,"sign-up",3,"click"],[1,"error-text"],[1,"pi","pi-times-circle"],[1,"createAccount-container"],[3,"showLogin"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,Ai,2,0,"span",4)(5,Vi,2,0,"span",4),r()(),v(6,qi,28,5,"div",5)(7,Hi,2,0,"div",6),r()()),e&2&&(s(2),F("background-image","url(assets/images/vecteezy-backgroundImg.jpg)"),s(2),p("ngIf",t.isloginPanel),s(),p("ngIf",!t.isloginPanel),s(),p("ngIf",t.isloginPanel),s(),p("ngIf",!t.isloginPanel))},dependencies:[V,A,q,j,B,D,R,N,G,Z,K,J,Q,Y,ee,te,oe,re,ne,W,le,ae,me,se,pe,ue,de,ce,fe,ge,_e,ve,Me,he,Ce,xe,ye,Se,Ie,Ee,Te,Pe,X,Fe,Le,be,Ae,Ve,Oe,ke,Ue,je,De,Re,Be,Ne,Ge,ze,qe,$e,Ke,We,ie,Je,Qe,Ye,ei,ii,ti,oi,ri,ni,li,we,Xe,ai,mi,si,pi,ui,di,ci,fi,gi,_i,vi,Mi,hi,Ci,Ze,bi,xi,yi,wi,He,Si,$,H,Ii,Ei],styles:['.login-sec[_ngcontent-%COMP%]{width:85%;height:77vh;display:grid;grid-template-columns:repeat(2,1fr);background:#f0f8ff}.error-text[_ngcontent-%COMP%]{color:red;font-size:12px}.login-img-sec[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat}.welcm-txt[_ngcontent-%COMP%]{color:#fff;font-family:poppins;font-size:2.5rem;font-weight:700;letter-spacing:2px}.login-form-group[_ngcontent-%COMP%]{width:21vw;gap:.3rem}.login-input[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%]{height:2rem}.login-btn[_ngcontent-%COMP%]{border:none;background:#41c441;color:#fff;cursor:pointer}.login-title[_ngcontent-%COMP%]{font-family:poppins;font-size:1.3rem;color:var(--primaryColor)}.sign-up[_ngcontent-%COMP%]{color:var(--primaryColor);font-size:.8rem;font-family:"system-ui";font-weight:500;cursor:pointer}  .error-text .pi{font-size:.7rem}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.login-member-input[_ngcontent-%COMP%]{transform:scale(1.1)}.AdminMember[_ngcontent-%COMP%], .userMember[_ngcontent-%COMP%]{margin-top:3px;margin-left:1px}.member-container[_ngcontent-%COMP%]{color:#515151;font-size:.9rem}']})};export{Ti as LoginComponent};
