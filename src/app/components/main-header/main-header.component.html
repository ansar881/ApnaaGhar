<div class="home-comp bgWhite">
    <div class="home-header paddingILRem1 bgWhite width100pc height100pc display-flex align-items-center justify-content-space-between">
        <div class="home-header-left height100pc display-flex align-items-center">
            <div class="img-div height100pc paddingBRem0-5">
                <img class="projIcon height100pc" src="assets/images/homeicon2.avif" alt="ApnaaGharIcon" />
            </div>
            <div class="proj-title primaryColor fontSizeRem1-2 fontWeight600">
                ApnaaGhar
            </div>
        </div>

        <div class="header-input">
            <p-megaMenu orientation="horizontal" [model]="items"/>
        </div>
        
        <div class="home-header-right display-flex align-items-center gapRem2">
            <div class="header-right-items display-flex align-items-center gapRem0-5">
                <div *ngFor="let option of headerItems" class="home-btn-div display-flex gapRem0-5 paddingRem0-4"
                    (click)="headerBtnClicked(option)">
                    <span [class]="option.icon"></span><span>{{option.label}}</span>
                </div>
            </div>
            <div class="user-div">
                <p-avatar 
                    icon="pi pi-user" 
                    styleClass="mr-2" 
                    [style]="{ 'background-color': 'var(--primaryColor)', color: '#fff' }" 
                    shape="circle" 
                    (click)="avatarClick($event, loginPopup)"/>
                <p-overlayPanel #loginPopup [showCloseIcon]="true" [style]="{width: '320px'}">
                    <div class="user-popup-container">
                        <div *ngIf="isUserLoggedIn()" class="user-info-section">
                            <div class="user-header">
                                <p-avatar 
                                    [label]="getUserInitials()" 
                                    [style]="{ 'background-color': 'var(--primaryColor)', color: '#fff' }" 
                                    shape="circle" 
                                    size="xlarge"/>
                                <div class="user-details">
                                    <div class="user-name">{{ getUserName() }}</div>
                                    <div class="user-email">{{ getUserEmail() }}</div>
                                    <p-badge 
                                        [value]="getUserRole()" 
                                        [severity]="getRoleSeverity()"
                                        class="user-role-badge"/>
                                </div>
                            </div>
                            <div class="user-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Member Since</span>
                                    <span class="stat-value">{{ getUserMemberSince() }}</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Type</span>
                                    <span class="stat-value">{{ getUserType() }}</span>
                                </div>
                            </div>
                            <hr class="divider">
                            <div class="user-actions">
                                <button pButton type="button" label="View Profile" icon="pi pi-user" class="p-button-text w-full profile-btn" (click)="viewProfile()"></button>
                                <button pButton type="button" label="My Listings" icon="pi pi-list" class="p-button-text w-full listings-btn" (click)="goToMyListings()"></button>
                                <button pButton type="button" label="Settings" icon="pi pi-cog" class="p-button-text w-full settings-btn" (click)="goToSettings()"></button>
                            </div>
                            <hr class="divider">
                            <button pButton type="button" label="Log Out" icon="pi pi-power-off" class="p-button-text w-full logout-btn" (click)="logOut()"></button>
                        </div>
                        
                        <div *ngIf="!isUserLoggedIn()" class="not-logged-in-section">
                            <div class="not-logged-icon">
                                <i class="pi pi-user"></i>
                            </div>
                            <div class="not-logged-text">
                                <p>Welcome to ApnaaGhar!</p>
                                <small>Sign in to access your account and listings</small>
                            </div>
                            <button pButton type="button" label="Login" icon="pi pi-sign-in" class="p-button w-full login-btn" (click)="goToLoginPage()"></button>
                            <button pButton type="button" label="Create Account" icon="pi pi-plus" class="p-button-outlined w-full signup-btn" (click)="goToSignUp()"></button>
                        </div>
                    </div>
                </p-overlayPanel>
            </div>
        </div>
    </div>
</div> 